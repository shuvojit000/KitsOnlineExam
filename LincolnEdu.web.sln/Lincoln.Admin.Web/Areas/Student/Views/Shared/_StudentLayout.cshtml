

<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="KITS">
    <link rel="shortcut icon" type="image/x-icon" href="~/Content/assets/images/ico/favicon.ico">
    <!-- BEGIN: Vendor CSS-->
    <link rel="shortcut icon" type="image/x-icon" href="~/Content/assets/images/ico/favicon.ico">
    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="~/Content/assets/vendors/css/vendors.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/assets/vendors/css/tables/datatable/datatables.min.css">

    <!-- END: Vendor CSS-->
    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="~/Content/assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/assets/css/bootstrap-extended.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/assets/css/colors.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/assets/css/components.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/assets/fonts/feather/style.min.css">
    <!-- END: Theme CSS-->
    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="~/Content/assets/css/core/menu/menu-types/vertical-menu-modern.css">
    <link rel="stylesheet" type="text/css" href="~/Content/assets/css/core/colors/palette-gradient.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/assets/fonts/simple-line-icons/style.min.css">
    <link rel="stylesheet" type="text/css" href="~/Content/assets/css/pages/timeline.min.css">
    <link href="~/Content/assets/vendors/css/pickers/datetime/bootstrap-datetimepicker.css" rel="stylesheet" />
    <!-- BEGIN Vendor JS-->
    <script src="~/Content/assets/vendors/js/vendors.min.js"></script>
    <script src="~/Content/assets/vendors/js/extensions/moment.min.js"></script>
    <script src="~/Content/assets/vendors/js/pickers/dateTime/bootstrap-datetimepicker.min.js"></script>
    <script src="~/Content/assets/js/scripts/pickers/dateTime/bootstrap-datetime.min.js"></script>
    <script src="~/Content/assets/vendors/js/tables/datatable/datatables.min.js"></script>

    <script src="~/Content/assets/js/scripts/tables/datatables/datatable-styling.min.js"></script>
</head>
<!-- END: Head-->
<!-- BEGIN: Body-->
<body class="vertical-layout vertical-menu-modern 2-columns   fixed-navbar" data-open="click" data-menu="vertical-menu-modern" data-col="2-columns">
    <!-- BEGIN: Header-->
    <nav class="header-navbar navbar-expand-lg navbar navbar-with-menu fixed-top navbar-semi-dark navbar-shadow">
        <div class="navbar-wrapper">
            <div class="navbar-header">
                <ul class="nav navbar-nav flex-row">
                    <li class="nav-item mobile-menu d-lg-none mr-auto">
                        <a class="nav-link nav-menu-main menu-toggle hidden-xs" href="#">
                            <i class="ft-menu font-large-1"></i>
                        </a>
                    </li>
                    <li class="nav-item mr-auto">
                        <a class="navbar-brand" href="@Url.Action("Dashboard","Student",new {area="Student" })">
                            <img class="brand-logo" alt="stack admin logo" src="~/Content/assets/images/logo/dashboardLogo.png">
                        </a>
                    </li>
                    <li class="nav-item d-lg-none">
                        <a class="nav-link open-navbar-container" data-toggle="collapse" data-target="#navbar-mobile">
                            <i class="fa fa-ellipsis-v"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="navbar-container content">
                <div class="collapse navbar-collapse" id="navbar-mobile">
                    <ul class="nav navbar-nav mr-auto float-left">
                        <li class="nav-item d-none d-md-block">
                            <a class="nav-link nav-link-expand" href="#">
                                <i class="ficon ft-maximize"></i>
                            </a>
                        </li>
                        <li class="nav-item nav-search">
                        </li>
                    </ul>
                    <ul class="nav navbar-nav float-right">

                        <li class="dropdown dropdown-user nav-item">
                            <a class="dropdown-toggle nav-link dropdown-user-link" href="#" data-toggle="dropdown">
                                <span class="avatar avatar-online">
                                    <img src="~/Content/assets/images/portrait/small/avatar-s-1.png" alt="avatar">
                                    <i></i>
                                </span>
                                <span class="user-name">@User.UserName</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="dropdown-item" data-toggle="modal" data-target="#myModal">
                                    <i class="ft-check-square"></i> My Profile
                                </a>
                                <a class="dropdown-item" data-toggle="modal" data-target="#passModal">
                                    <i class="ft-check-square"></i> Change Password
                                </a>
                                <a class="dropdown-item" href="@Url.Action("LogOut","Home",new {area="" })">
                                    <i class="ft-power"></i> Logout
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- END: Header-->
    <!-- BEGIN: Main Menu-->
    <div class="main-menu menu-fixed menu-dark menu-accordion menu-shadow" data-scroll-to-active="true">
        <div class="main-menu-content">
            <ul class="navigation navigation-main" id="main-menu-navigation" data-menu="menu-navigation">
                <li class="nav-item active">
                    <a href="@Url.Action("Dashboard","Student",new {area="Student" })"><i class="ft-home"></i><span class="menu-title" data-i18n="">Dashboard</span></a>
                </li>


                <li class="nav-item">
                    <a href="@Url.Action("LogOut","Home",new {area="" })"><i class="ft-power"></i><span class="menu-title" data-i18n="">Logout</span></a>
                </li>
            </ul>
        </div>
    </div>
    <script src="~/Content/assets/js/core/app-menu.min.js"></script>
    <script src="~/Content/assets/js/core/app.min.js"></script>
    <!-- END: Main Menu-->
    <!-- BEGIN: Content-->
    <div class="app-content content">
        @RenderBody()
    </div>
    <!-- END: Content-->

    <div class="col-lg-12">
        <div class="modal fade" id="sessionTimeoutWarning" tabindex="-1" role="dialog" data-keyboard="false" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">

                </div>
            </div>
        </div>
    </div>

    <!-- BEGIN: Footer-->
    <footer class="footer fixed-bottom footer-light navbar-border">
        <p class="clearfix blue-grey lighten-2 text-sm-center mb-0 px-2">
            <span class="float-md-left d-block d-md-inline-block">
                Copyright  &copy; 2019
                <a class="text-bold-800 grey darken-2" href="http://kreativesit.com" target="_blank">KITS</a>
            </span>
            <span class="float-md-right d-none d-lg-block">ESA<i class="ft-home pink"></i></span>
        </p>
    </footer>

    <script>
        $(document).ajaxError(function (xhr, props) {
            if (props.status === 401) {
                        window.location.href = '@Url.Action("LogIn","Home",new {area="" })';
                     }
        });

    //session end
        var sessionTimeoutWarning = @Session.Timeout - 1;

        var timeout = parseInt(sessionTimeoutWarning) * 60 * 1000;
        var time = setTimeout('SessionEnd()', timeout);

    function startTimer(duration, display) {
    var timer = duration, minutes, seconds;
        setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        if (minutes + ":" + seconds == "00:00") {
            window.location.href = '@Url.Action("LogIn","Home",new {area="" })';
        }

        display.text(minutes + ":" + seconds);

        if (--timer < 0) {
            timer = duration;
        }
    }, 1000);
}
        function ResetTimer() {
            clearTimeout(time);
            time = setTimeout('SessionEnd()', timeout);
        }

    function SessionEnd() {
        $("#sessionTimeoutWarning").modal('show');
        $('#sessionTimeoutWarning .modal-content').html('');
        $('#sessionTimeoutWarning .modal-content').html('<div class="modal-body">'+
                                        '<div style="width:100%;height:100%;margin: 0px; padding:0px">'+
                                            '<div style="width:25%;margin: 0px; padding:0px;float:left;">'+
                                                '<i class="fa fa-warning" style="font-size: 120px;color:#da4f49"></i>'+
                                            '</div>'+
                                            '<div style="width:70%; margin: 0px; padding:0px; padding-top: 10px; padding-left: 3%; float:right; text-align:center;">'+
                                                '<h6>Your session is about to expire!</h6>'+
                                                '<p style="font-size: 15px;">'+
                                                    'You will be logged out in'+
                                                    '<span style="display: inline;font-size: 20px;font-weight: bold" id="time">'+
                                                    '</span>'+
                                                    '<br />'+
                                                    'Do you want to stay signed in?'+
                                                '</p>'+
                                            '</div>'+
                                        '</div>'+
                                    '</div>'+
                                    '<div class="clearfix"></div>'+
                                    '<div style="width:100%;margin-bottom: 20px;margin-top: 20px; text-align:center;">'+
                                        '<button id="btnYes" class="btn btn-primary">Yes, Keep me signed in</button>'+
                                        '<button id="btnNo" class="btn btn-danger">No, Sign me out</button>'+
                                '</div>');
        var display = $('#time');
        startTimer(timeout / 1000, display);
    }

    $(document).on('click', '#btnYes', function () {
         $("#sessionTimeoutWarning").modal('hide');
        window.location = window.location.href;
    });

        window.onload = ResetTimer;
        window.onmousemove = ResetTimer;
        window.onmousedown = ResetTimer;
        window.ontouchstart = ResetTimer;
        window.onclick = ResetTimer;
        window.onkeypress = ResetTimer;


    </script>

</body>
</html>
